# 扩展主题的个性化设置-4

## 1.添加版权声明

参考：

- [https://www.v53922.com/posts/cc368447.html#%E7%89%88%E6%9D%83%E5%A3%B0%E6%98%8E](https://www.v53922.com/posts/cc368447.html#版权声明)
- [在Hexo中自动为Yilia主题增加版权声明](<https://blog.zscself.com/posts/ee4d9ecb/>)
- [hexo-theme-yilia-plus主题的版权声明](<https://github.com/JoeyBling/hexo-theme-yilia-plus/commit/c1215e132f6d5621c5fea83d3c4f7ccbcca074a3>)

---

### 1.1在文末添加声明

在`themes/yilia/layout/_partial/article.ejs`文件的指定位置如下：

```ejs
<%- post.content %>
	<% } %>
	<-- 在此处添加代码-->
	<% if ((theme.reward_type === 2 || (theme.reward_type === 1 && post.reward)) && !index){ %>
```

添加如下代码：
```ejs
 <!-- 添加版权声明 -->
    <%
  var sUrl = url.replace(/index\.html$/, '');
  sUrl = /^(http:|https:)\/\//.test(sUrl) ? sUrl : 'https:' + sUrl;
%>
<% if ((theme.declare_type === 2 || (theme.declare_type === 1 && post.declare)) && !index){ %>
  <div class="declare">
    <strong>本文作者：</strong>
    <% if(config.author != undefined){ %>
      <%= config.author%>
    <% }else{%>
      <font color="red">请在博客根目录“_config.yml”中填入正确的“author”</font>
    <%}%>
    <br>
    <strong>本文链接：</strong>
    <a href="<%= config.url %>/<%= post.path %>" title="<%= post.title %>" target="_blank"><%= config.url %>/<%= post.path %></a>
    <br>
    <strong>版权声明：</strong>
    本作品采用
    <a rel="license" href="<%= theme.licensee_url%>"><%= theme.licensee_name%></a>
    进行许可。转载请注明出处！
    <% if(theme.licensee_img != undefined){ %>
      <br>
      <a rel="license" href="<%= theme.licensee_url%>"><img alt="知识共享许可协议" style="border-width:0" src="<%= theme.licensee_img%>"/></a>
    <% } %>
  </div>
<% } else {%>
  <div class="declare" hidden="hidden"></div>
<% } %>
      <!-- 添加版权声明 -->
```

### 1.2添加样式
在文件`yilia/source/main.0cf68a.css`中添加
```css
/*版权声明的样式*/
.declare {
  background-color: #eaeaea;
  margin-top: 2em;
  border-left: 3px solid #ff1700;
  padding: .5em 1em; 
}
```

### 1.3在主题中开启设置
在文件`themes/yilia/_config.yml`中添加：

```yml
# 版权声明
#在需要进行版权声明的文章的md文件头部，设置属性declare: true。
#版权基础设定：0-关闭声明； 1-文章对应的md文件里有declare: true属性，才有版权声明； 2-所有文章均有版权声明
declare_type: 1
licensee_url: https://creativecommons.org/licenses/by-nc-sa/4.0/        #当前应用的版权协议地址。
licensee_name: '知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议'#版权协议的名称
licensee_img: https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png    #版权协议的Logo
```



## 2.代码块设置

参考：[Hexo 基于yilia主题及其它插件优化](<https://www.jianshu.com/p/adb7640c97c2>)

### 2.1修改代码块的样式

直接修改编译好的文件。路径为： `theme/yilia/source/main.0cf68a.css `:

```css
(1)修改代码背景色，
搜索 .article-entry .highlight, 修改background后面的颜色
将 pre{background:#272822;
改为 pre{background:#1a0139;

(2)修改行号颜色，
搜索 .article-entry .highlight .gutter pre .line
将.article-entry .highlight .gutter pre .line{color:#666
改为.article-entry .highlight .gutter pre .line{color:#fc0000

(3)修改代码字体颜色 
搜索 .article-entry .highlight .line
将.article-entry .highlight .line{color:#fff;
修改为.article-entry .highlight .line{color:#00ff0d;
```

效果图：

![](https://user-images.githubusercontent.com/45334066/63212335-714fe680-c135-11e9-8474-7de47bd3f3e5.png)

个人感觉还不是很满意，有待优化。



### 2.2代码块行号显示错乱

修改`yilia/source/main.0cf68a.css`的内容：

将`white-space:pre-wrap;` 删除，这个问题是自动换行造成的，使用不自动换行的`white-space:pre;`样式代码块部分会自动出现底部滚动条，行号错乱问题就没有了。

## 3.修改字数统计的样式

详见：<https://github.com/yansheng836/yansheng836.github.io/commit/bd4ebc0be6740a5442ada6ce957464014597c4ce>

参考：hexo-theme-yilia-plus：

<https://github.com/JoeyBling/hexo-theme-yilia-plus/commit/0006834b5bb480b83dfba028c0f0073aa0ff4e36#diff-37125011f1c485ef4209f31ba31134ba>

## 4.添加飘雪特效

详见：<https://github.com/yansheng836/yansheng836.github.io/commit/517a842c154a6b36544b7091cdc416aa9bec05b4>

参考：<https://github.com/MlgmXyysd/snow.js>

<https://github.com/JoeyBling/hexo-theme-yilia-plus/commit/544355367f2a50be652bbf5eb171d1c523a407dc>

## 5.添加标签页鼠标悬浮特效

详见：<https://github.com/yansheng836/yansheng836.github.io/commit/a6bc543a3ede337e091423eb9e8931f92485034e>

## 6.添加rss订阅功能

详见：<https://www.jianshu.com/p/2aaac7a19736>

有疑问，不知道这是否以及开启订阅？

## 7.将项目部署到自己的服务器（待验证）

修改配置文件`_config.yml`的相关内容：

根目录

```
url: https://yansheng836.github.io
root: /blog/
```

主题目录

```
root: /blog/
```

